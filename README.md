implementation + example for final state machine with react